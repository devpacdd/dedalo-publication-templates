!function(){"use strict";const e=function(){};e.prototype.request=async function(e){const n=e.url||environment.api_server_url,t=e.method||"POST",r=e.mode||"cors",s=e.cache||"no-cache",o=e.credentials||"same-origin",i=e.headers||{"Content-Type":"application/json"},a=e.redirect||"follow",c=e.referrer||"no-referrer",u=e.body;u.code||(u.code=environment.api_code),u.lang||(u.lang=environment.lang),!u.db_name&&environment.api_db_name&&(u.db_name=environment.api_db_name);return fetch(n,{method:t,mode:r,cache:s,credentials:o,headers:i,redirect:a,referrer:c,body:JSON.stringify(u)}).then((function(e){if(!e.ok)throw console.warn("-> handle_errors response:",e),Error(e.statusText);return e})).then(e=>e.json().then(e=>e)).catch(e=>(console.error("!!!!! [page data_manager.request] ERROR:",e),console.warn("body:",u),{result:!1,msg:e.message,error:e}))};window.data_manager=new e,window.event_manager=new function(){this.events=[],this.last_token=-1,this.subscribe=function(e,n){const t="event_"+String(++this.last_token),r={event_name:e,token:t,callback:n};return this.events.push(r),t},this.unsubscribe=function(e){return this.events.map((n,t,r)=>{n.token===e&&r.splice(t,1)})},this.publish=function(e,n={}){const t=this.events.filter(n=>n.event_name===e);if(t){return t.map(e=>e.callback(n))}return!1},this.get_events=function(){return this.events},this.fire_event=function(e,n){var t;if(e.ownerDocument)t=e.ownerDocument;else{if(9!=e.nodeType)throw new Error("Invalid node passed to fireEvent: "+e.id);t=e}if(e.dispatchEvent){var r="";switch(n){case"click":case"mousedown":case"mouseup":r="MouseEvents";break;case"focus":case"change":case"blur":case"select":r="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+n+"'."}var s="change"!=n;(o=t.createEvent(r)).initEvent(n,s,!0),o.synthetic=!0,e.dispatchEvent(o,!0)}else if(e.fireEvent){var o;(o=t.createEventObject()).synthetic=!0,e.fireEvent("on"+n,o)}},this.when_in_dom=function(e,n){const t=new MutationObserver((function(r){document.contains(e)&&(t.disconnect(),n(this))}));return t.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),t}}}();
//# sourceMappingURL=app_utils-min.js.map